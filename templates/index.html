<html>
  <head>
    <script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <title> {{ username }} | Pro-alarm </title>

    <!--bootstrap -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">

  </head>
  <body>
    <div class="page-header">
      <h1 align="center"><img src="/static/logo.png" style="height:10%">Pro-alarm <br><small>Intrusion detection system</small></h1>
    </div>

    <ul class="nav nav-pills" style="margin-top: 30px">
      <li role="presentation" class="active" style="width:20%"><a id="status">Status</a></li>
      <li role="presentation" style="width:20%"><a id="profile">Profile</a></li>
      <li role="presentation" style="width:20%"><a id="settings">Settings</a></li>
      <li role="presentation" style="width:20%"><a id="logs">Logs</a></li>
    </ul>

    <div class="container" id="body"></div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>

    <script>
      $(document).ready(function(){
        $("#body").load("/static/status.html")

        var socket = io.connect('http://' + document.domain + ':' + location.port);
        socket.emit('getstatus')
        socket.on('connect', function() {
            socket.emit('connection', {data: location.host + " is connected"});
            console.log("Connected")
        });

        socket.on('status', function(status) {
          console.log("status received")
          var seldiv = '#' + status.entry;
          $(seldiv).html(status.status);
        });

        $("#status").on("click", function(){
          $("#body").load("/static/status.html")
        });
      });
    </script>
  </body>
</html>
